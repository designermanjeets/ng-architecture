<ng-container *ngIf="connectWithDynamicComp">

  <mat-form-field>
    <input matInput placeholder="Search" (input)="filterChanged($event.target.value)">
  </mat-form-field>

  <!-- cdkDropList (cdkDropListDropped)="drop($event)"--> <!--Apply on mat-tree-->
  <mat-tree
      [dataSource]="dataSource"
      [treeControl]="treeControl"
      cdkDropList
      [cdkDropListConnectedTo]="[connectWithDynamicComp]"
  >
    <mat-tree-node
      *matTreeNodeDef="let node"
       matTreeNodeToggle
       matTreeNodePadding
       [cdkDragLockAxis]=dragDirection
       cdkDrag
       [cdkDragData]="node"
       (mouseenter)="dragHover(node)"
       (mouseleave)="dragHoverEnd(node)"
       (cdkDragStarted)="dragStart($event)"
       (cdkDragEntered)="dragEnter($event)"
       (cdkDragReleased)="dragEnd($event)"
       [cdkDragDisabled]="dragDisabled"
       msCdkDragPlaceholder
    >
      <button mat-icon-button disabled></button>
      <mat-checkbox class="checklist-leaf-node"
          [checked]="checklistSelection.isSelected(node)"
          (change)="checklistSelection.toggle(node);">{{node.item}}</mat-checkbox>
      <div class="custom-placeholder" *cdkDragPlaceholder></div>
    </mat-tree-node>
    <mat-tree-node
      *matTreeNodeDef="let node; when: hasChild"
      [cdkDragLockAxis]=dragDirection
      matTreeNodePadding
      cdkDrag
      [cdkDragData]="node"
      (mouseenter)="dragHover(node)"
      (mouseleave)="dragHoverEnd(node)"
      (cdkDragStarted)="dragStart($event)"
      (cdkDragEntered)="dragEnter($event)"
      (cdkDragReleased)="dragEnd($event)"
      [cdkDragDisabled]="dragDisabled"
      msCdkDragPlaceholder
    >
      <button mat-icon-button matTreeNodeToggle
            [attr.aria-label]="'toggle ' + node.filename">
        <mat-icon class="mat-icon-rtl-mirror">
          {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
        </mat-icon>
      </button>
      <mat-checkbox
        [checked]="descendantsAllSelected(node)"
        [indeterminate]="descendantsPartiallySelected(node)"
        (change)="todoItemSelectionToggle(node)">{{node.item}}</mat-checkbox>
      <div class="custom-placeholder" *cdkDragPlaceholder></div>
    </mat-tree-node>
  </mat-tree>
</ng-container>
